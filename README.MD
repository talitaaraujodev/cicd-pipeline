<div align="center">

# AutomatizaÃ§Ã£o de Pipelines com AWS EC2 + Nginx + GitHub Actions + Docker e Docker Hub

Este Ã© um mini projeto de exemplo de como automatizar pipelines com as tecnologias acima e otimizar esse processo

</div>

## Como funcionam os Workflows da AplicaÃ§Ã£o? ğŸ‘‹

### Workflow CI

O primeiro workflow CI Ã© executado quando uma Pull Request (PR) Ã© aberta para a branch main e realiza as seguintes tarefas:

- ExecuÃ§Ã£o dos testes;
- Login no Docker Hub;
- Build da nova imagem;
- Push da imagem para a conta do Docker Hub;

### Workflow CD

O segundo workflow CD Ã© executado quando o primeiro workflow Ã© finalizado com sucesso e realiza as seguintes tarefas:

- Faz o pull da imagem Docker mais recente do Docker Hub;
- Garante que a porta 5001 esteja livre;
- Executa um novo contÃªiner na porta 5001 e espera o contÃªiner ficar estÃ¡vel;
- Testa o novo deploy temporÃ¡rio na porta 5001;
- Atualiza temporariamente o trÃ¡fego no Nginx para a porta 5001;
- Garante que a porta 5000 esteja livre;
- Remove o contÃªiner antigo, se existir;
- Executa o novo contÃªiner na porta 5000 e espera o contÃªiner ficar estÃ¡vel;
- Testa o novo deploy na porta 5000;
- Atualiza o Nginx para apontar de volta para a porta 5000;
- Remove o contÃªiner na porta 5001;

## ConsideraÃ§Ãµes âœ¨

### EstratÃ©gia Utilizada

Essa Ã© uma estratÃ©gia de deploy azul-verde (blue-green deployment). Ele lanÃ§a uma nova versÃ£o do aplicativo em um novo contÃªiner (porta 5001), testa-o, e, se estiver tudo funcionando corretamente, muda temporariamente o balanceador de carga (Nginx) para apontar para o novo contÃªiner. Em seguida, para e remove o contÃªiner antigo, lanÃ§a a nova versÃ£o na porta original (5000), testa novamente, e finalmente atualiza o balanceador de carga para apontar para a nova versÃ£o.

### O que Ã© EstratÃ©gia Azul-Verde (Blue-Green Deployment)?

**Como Funciona?**

- **Dois Ambientes IdÃªnticos:** Mantenha dois ambientes de produÃ§Ã£o idÃªnticos, denominados "azul" e "verde";
- **Novo Deploy no Ambiente Inativo:** A nova versÃ£o do aplicativo Ã© implantada no ambiente inativo (por exemplo, ambiente verde) enquanto o ambiente ativo (por exemplo, ambiente azul) continua a servir o trÃ¡fego;
- **Testes no Novo Ambiente:** Realize testes no novo ambiente para garantir que ele funciona corretamente;
- Troca de TrÃ¡fego: Uma vez que a nova versÃ£o Ã© validada, o trÃ¡fego Ã© direcionado para o novo ambiente (verde), tornando-o ativo;
- **Rollback FÃ¡cil:** Em caso de problemas, o trÃ¡fego pode ser rapidamente revertido para o ambiente original (azul), garantindo um rollback rÃ¡pido.

**Vantagens** âœ…

- **Zero Downtime:** Minimiza o tempo de inatividade durante a implantaÃ§Ã£o;
- **Rollback RÃ¡pido:** FÃ¡cil reversÃ£o para a versÃ£o anterior em caso de falhas;
- **Ambientes IdÃªnticos:** ConsistÃªncia entre os ambientes de produÃ§Ã£o;

**Desvantagens** â

- **Custo:** Manter dois ambientes de produÃ§Ã£o idÃªnticos pode ser caro;
- **Complexidade:** Requer uma infraestrutura que suporte dois ambientes completos;

<br><br>

### ğŸ‘©ğŸ½â€ğŸ’» Desenvolvido por Talita Araujo

<div align="left">
  <a href = "mailto:talitacumi.araujo@gmail.com"><img src="https://img.shields.io/badge/-Gmail-db4a39?style=for-the-badge&logo=gmail&logoColor=white"></a>
  <a href="https://www.linkedin.com/in/talitaaraujodev" target="_blank"><img src="https://img.shields.io/badge/LinkedIn-0077B5?style=for-the-badge&logo=linkedin&logoColor=white"></a>
</div>
